{{$input := .global.workflow.input}}\n{{$protocols := .global.workflow.input.protocols}}\n{{$netapp := .global.workflow.input.netapp}}\n{{$imm := .global.workflow.input.imm}}\n{{$nxos := .global.workflow.input.nxos}}\n{{$vlans := .global.workflow.input.vlans}}\n{{$vlan_ranges := .global.workflow.input.vlan_ranges}}\n---\nprotocols:\n{{if index $protocols "dhcp_servers"}}\n- dhcp_servers:\n{{range $i, $dhcps := $protocols.dhcp_servers}}\n- {{$dhcps}}\n{{end}}\n{{else}}\n- dhcp_servers: []\n{{end}}\n{{if index $protocols "dns_domains"}}\ndns_domains:\n{{range $i, $dnsdomains := $protocols.dns_domains}}\n- {{$dnsdomains}}\n{{end}}\n{{else}}\ndns_domains: []\n{{end}}\n{{if index $protocols "dns_servers"}}\ndns_servers:\n{{range $i, $dnsservers := $protocols.dns_servers}}\n- {{$dnsservers}}\n{{end}}\n{{else}}\ndns_servers: []\n{{end}}\ntimezone: {{if index $protocols "timezone"}}{{$protocols.timezone}}{{end}}\n{{if index $protocols "ntp_servers"}}\nntp_servers:\n{{range $i, $ntpservers := $protocols.ntp_servers}}\n- {{$ntpservers}}\n{{end}}\n{{else}}\nntp_servers: []\n{{end}}\nnetapp:\n- username: {{if index $netapp "username"}}{{$netapp.username}}{{end}}\nautosupport:\n{{if index $netapp.autosupport "mail_hosts"}}\nmail_hosts:\n{{range $i, $netapp_autosupport_mail_hosts := $netapp.autosupport.mail_hosts}}\n- {{$netapp_autosupport_mail_hosts}}\n{{end}}\n{{else}}\nmail_hosts: []\n{{end}}\nproxy_url: {{if index $netapp.autosupport "proxy_url" }}{{$netapp.autosupport.proxy_url}}{{end}}\nfrom_address: {{if index $netapp.autosupport "from_address"}}{{$netapp.autosupport.from_address}}{{end}}\n{{if index $netapp.autosupport "to_addresses"}}\nto_addresses:\n{{range $i, $netapp_autosupport_to_address := $netapp.autosupport.to_addresses}}\n- {{$netapp_autosupport_to_address}}\n{{end}}\n{{else}}\nto_addresses: []\n{{end}}\nsnmp:\ncontact: {{if index $netapp.snmp "snmp_contact"}}{{$netapp.snmp.snmp_contact}}{{end}}\nlocation: {{if index $netapp.snmp "snmp_location"}}{{$netapp.snmp.snmp_location}}{{end}}\nusername: {{if index $netapp.snmp "snmp_username"}}{{$netapp.snmp.snmp_username}}{{end}}\ntrap_server: {{if index $netapp.snmp "trap_server"}}{{$netapp.snmp.trap_server}}{{end}}\nclusters:\n{{range $i, $cluster := $netapp.clusters}}\n- login_banner: {{ if index $netapp "login_banner" }}{{ $cluster.login_banner }}{{ end  }}\nname: {{if index $cluster "cluster_name"}}{{$cluster.cluster_name}}{{end}}\nnodes:\nnode01: {{if index $cluster.nodes "node01"}}{{$cluster.nodes.node01}}{{end}}\nnode02: {{if index $cluster.nodes "node02"}}{{$cluster.nodes.node02}}{{end}}\n{{if index $cluster.nodes "data_ports"}}\ndata_ports:\n{{range $i, $netapp_data_ports := $cluster.nodes.data_ports}}\n- {{$netapp_data_ports}}\n{{end}}\n{{else}}\ndata_ports: []\n{{end}}\ndata_speed: {{if index $cluster.nodes "data_speed"}}{{$cluster.nodes.data_speed}}{{end}}\n{{if index $cluster.nodes "fcp_ports"}}\nfcp_ports:\n{{range $i, $netapp_fcp_ports := $cluster.nodes.fcp_ports}}\n- {{$netapp_fcp_ports}}\n{{end}}\n{{else}}\nfcp_ports: []\n{{end}}\nfcp_speed: {{if index $cluster.nodes "fcp_speed"}}{{$cluster.nodes.fcp_speed}}{{end}}\nnetwork:\n{{if index $cluster.nodes "network_data"}}\ndata:\n{{range $i, $data := $cluster.nodes.network_data}}\n- {{$data}}\n{{end}}\n{{else}}\ndata: []\n{{end}}\nmanagement: {{if index $cluster.nodes "network_management"}}{{$cluster.nodes.network_management}}{{end}}\n\nsvm:\nlogin_banner: {{ if index $netapp "login_banner" }}{{ $netapp.svm_login_banner }}{{ end }}\nname: {{if index $cluster "svm"}}{{$cluster.svm}}{{end}}\n{{if index $cluster "volumes"}}\nvolumes:\n{{range $i, $volume := $cluster.volumes}}\n- name: {{if index $volume "name"}}{{$volume.name}}{{end}}\nos_type: {{if index $volume "os_type"}}{{$volume.os_type}}{{end}}\nprotocol: {{if index $volume "protocol"}}{{$volume.protocol}}{{end}}\nsize: {{if index $volume "size"}}{{$volume.size}}{{end}}\nvolume_type: {{if index $volume "volume_type"}}{{$volume.volume_type}}{{end}}\n{{end}}\n{{else}}\nvolumes: []\n{{end}}\n{{end}}\nintersight:\n- organization: {{if index $imm "organization"}}{{$imm.organization}}{{end}}\ncfg_qos_priorities: {{if index $imm "cfg_qos_priorities"}}{{$imm.cfg_qos_priorities}}{{else}}false{{end}}\ndiscovery_protocol: {{if index $imm "discovery_protocol"}}{{$imm.discovery_protocol}}{{end}}\n{{if index $imm "domains"}}\ndomains:\n{{range $i, $domain := $imm.domains}}\n- name: {{if index $domain "domain_name"}}{{$domain.domain_name}}{{end}}\nswitch_mode: {{if index $domain "switch_mode"}}{{$domain.switch_mode}}{{end}}\n{{if index $domain "serial_numbers"}}\nserial_numbers:\n{{range $i, $serial := $domain.serial_numbers}}\n- {{$serial}}\n{{end}}\n{{else}}\nserial_numbers: []\n{{end}}\neth_uplink_ports:\n{{range $i, $eth_uplink_ports := $domain.eth_uplink_ports}}\n- {{$eth_uplink_ports}}\n{{end}}\neth_uplink_speed: {{if index $domain "eth_uplink_speed"}}{{$domain.eth_uplink_speed}}{{end}}\neth_breakout_speed: {{if index $domain "eth_breakout_speed"}}{{$domain.eth_breakout_speed}}{{end}}\n{{if index $domain "fcp_ports"}}\nfcp_uplink_ports:\n{{range $i, $fcp_uplink_ports := $domain.fcp_ports}}\n- {{$fcp_uplink_ports}}\n{{end}}\n{{else}}\nfcp_uplink_ports: []\n{{end}}\nfcp_uplink_speed: {{if index $domain "fcp_breakout_speed"}}{{$domain.fcp_breakout_speed}}{{end}}\n{{if index $domain "vsans"}}\nvsans:\n{{range $i, $vsan := $domain.vsans}}\n- {{$vsan}}\n{{end}}\n{{else}}\nvsans: []\n{{end}}\nnetwork:\n{{if index $domain "network_data"}}\ndata:\n{{range $i, $data := $domain.network_data}}\n- {{$data}}\n{{end}}\n{{else}}\ndata: []\n{{end}}\nmanagement: {{if index $domain "network_management"}}{{$domain.network_management}}{{end}}\n{{if index $domain "profiles" }}\nprofiles:\n{{range $i, $profile := $domain.profiles}}\n- equipment_type: {{if index $profile "equipment_type"}}{{$profile.equipment_type}}{{end}}\nidentifier: {{if index $profile "identifier"}}{{$profile.identifier}}{{end}}\n{{if index $profile "domain_ports"}}\ndomain_ports:\n{{range $i, $domain_ports := $profile.domain_ports}}\n- {{$domain_ports}}\n{{end}}\n{{else}}\ndomain_ports: []\n{{end}}\nprofile_start: {{if index $profile "profile_start"}}{{$profile.profile_start}}{{end}}\nsuffix_digits: {{if index $profile "suffix_digits"}}{{$profile.suffix_digits}}{{end}}\ninband_start: {{if index $profile "inband_start"}}{{$profile.inband_start}}{{end}}\nos_type: {{if index $profile "os_type"}}{{$profile.os_type}}{{end}}\n{{end}}\n{{else}}\nprofiles: []\n{{end}}\n{{end}}\n{{else}}\ndomains: []\n{{end}}\nfirmware:\nblades: {{if index $imm "firmware"}}{{$imm.firmware}}{{end}}\nrackmount: {{if index $imm "rack_firmware"}}{{$imm.rack_firmware}}{{end}}\npools:\nprefix: {{if index $imm "pools_prefix"}}{{$imm.pools_prefix}}{{end}}\npolicies:\nboot_volume: {{ if index $imm.policies "boot_volume" }}{{ $imm.policies.boot_volume }}{{ end }}\nprefix: {{if index $imm.policies "prefix"}}{{$imm.policies.prefix}}{{end}}\nlocal_user: {{if index $imm.policies "local_user"}}{{$imm.policies.local_user}}{{end}}\nsnmp:\ncontact: {{if index $imm.policies.snmp "contact"}}{{$imm.policies.snmp.contact}}{{end}}\nlocation: {{if index $imm.policies.snmp "location"}}{{$imm.policies.snmp.location}}{{end}}\nusername: {{if index $imm.policies.snmp "username"}}{{$imm.policies.snmp.username}}{{end}}\n{{if index $imm.policies.snmp "snmp_servers"}}\nservers:\n{{range $i, $snmp_servers := $imm.policies.snmp.snmp_servers}}\n- {{$snmp_servers}}\n{{end}}\n{{else}}\nservers: []\n{{end}}\nsyslog:\n{{if index $imm.policies "syslog_servers"}}\nservers:\n{{range $i, $syslog_servers := $imm.policies.syslog_servers}}\n- {{$syslog_servers}}\n{{end}}\n{{else}}\nservers: []\n{{end}}\nvirtualization:\n- datacenter: {{if index $imm.virtualization "datacenter"}}{{$imm.virtualization.datacenter}}{{end}}\nlicense_type: {{if index $imm.virtualization "license_type"}}{{$imm.virtualization.license_type}}{{end}}\nname: {{if index $imm.virtualization "vcenter"}}{{$imm.virtualization.vcenter}}{{end}}\ntype: {{if index $imm.virtualization "type"}}{{$imm.virtualization.type}}{{end}}\nusername: {{if index $imm.virtualization "vcenter_username"}}{{$imm.virtualization.vcenter_username}}{{end}}\n{{if index $imm.virtualization "virtual_switches"}}\nvirtual_switches:\n{{range $i, $switch := $imm.virtualization.virtual_switches}}\n{{if index $switch "data_types"}}\n- data_types:\n{{range $i, $data_types := $switch.data_types}}\n- {{$data_types}}\n{{end}}\n{{else}}\n- data_types: []\n{{end}}\nname: {{if index $switch "name"}}{{$switch.name}}{{end}}\ntype: {{if index $switch "type"}}{{$switch.type}}{{end}}\nalternate_name: {{if index $switch "alternate_name"}}{{$switch.alternate_name}}{{end}}\n{{end}}\n{{else}}\nvirtual_switches: []\n{{end}}\n{{if eq .global.workflow.input.config_nxos true}}\nnxos:\n- username: {{if index .global.workflow.input.nxos "username"}}{{.global.workflow.input.nxos.username}}{{end}}\n{{if index .global.workflow.input.nxos "switches"}}\nswitches:\n{{range $i, $switch := .global.workflow.input.nxos.switches}}\n- hostname: {{if index $switch "hostname"}}{{$switch.hostname}}{{end}}\nswitch_type: {{if index $switch "switch_type"}}{{$switch.switch_type}}{{end}}\nconfigure: {{if index $switch "configure_l3"}}{{$switch.configure_l3}}{{else}}false{{end}}\nbreakout_speed: {{if index $switch "breakout_speed"}}{{$switch.breakout_speed}}{{end}}\nvpc_config:\ndomain_id: {{if index $switch "vpc_domain_id"}}{{$switch.vpc_domain_id}}{{end}}\nkeepalive_ip: {{if index $switch "vpc_keepalive_ip"}}{{$switch.vpc_keepalive_ip}}{{end}}\n{{if index $switch "vpc_keepalive_ports"}}\nkeepalive_ports:\n{{range $i, $vpc_keepalive_ports := $switch.vpc_keepalive_ports}}\n- {{$vpc_keepalive_ports}}\n{{end}}\n{{else}}\nkeepalive_ports: []\n{{end}}\n{{if index $switch "vpc_peer_ports"}}\npeer_ports:\n{{range $i, $vpc_peer_ports := $switch.vpc_peer_ports}}\n- {{$vpc_peer_ports}}\n{{end}}\n{{else}}\npeer_ports: []\n{{end}}\n{{else}}\nswitches: []\n{{end}}\n{{end}}\n{{else}}\nnxos: []\n{{end}}\n{{if index .global.workflow.input "vlans"}}\nvlans:\n{{range $i, $vlan := .global.workflow.input.vlans}}\n- vlan_type: {{if index $vlan "vlan_type"}}{{$vlan.vlan_type}}{{end}}\nvlan_id: {{if index $vlan "vlan_id"}}{{$vlan.vlan_id}}{{end}}\nname: {{if index $vlan "name"}}{{$vlan.name}}{{end}}\nnetwork: {{if index $vlan "network"}}{{$vlan.network}}{{end}}\nconfigure_l2: {{if index $vlan "configure_l2"}}{{$vlan.configure_l2}}{{else}}false{{end}}\nconfigure_l3: {{if index $vlan "configure_l3"}}{{$vlan.configure_l3}}{{else}}false{{end}}\ndisjoint: {{if index $vlan "disjoint"}}{{$vlan.disjoint}}{{else}}false{{end}}\nnative_vlan: {{if index $vlan "native_vlan"}}{{$vlan.native_vlan}}{{else}}false{{end}}\nswitch_type: {{if index $vlan "switch_type"}}{{$vlan.switch_type}}{{end}}\nranges:\ncontroller: {{if index $vlan "ranges_controller"}}{{$vlan.ranges_controller}}{{end}}\npool: {{if index $vlan "ranges_pool"}}{{$vlan.ranges_pool}}{{end}}\nserver: {{if index $vlan "ranges_server"}}{{$vlan.ranges_server}}{{end}}\n{{end}}\n{{else}}\nvlans: []\n{{end}}\n{{if index .global.workflow.input "vlan_ranges"}}\nvlan_ranges:\n{{range $i, $vlan := .global.workflow.input.vlan_ranges}}\n- vlan_range: {{if index $vlan "vlan_range"}}{{$vlan.vlan_range}}{{end}}\nname_prefix: {{if index $vlan "name_prefix"}}{{$vlan.name_prefix}}{{end}}\nconfigure_l2: {{if index $vlan "configure_l2"}}{{$vlan.configure_l2}}{{else}}false{{end}}\ndisjoint: {{if index $vlan "disjoint"}}{{$vlan.disjoint}}{{else}}false{{end}}\n{{end}}\n{{else}}\nvlan_ranges: []\n{{end}}